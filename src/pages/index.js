import Head from "next/head";
// import { styles } from "@/styles/styles"; // styles.paddingX idhar sai ai hai
import Hero from "@/components/Hero";
import About from "@/components/About";
import Interversions from "@/components/Interversions";
import Blog from "@/components/Blog";
import Contact from "@/components/Contact"
import { createClient } from "next-sanity";
import imageUrlBuilder from "@sanity/image-url"

export default function Home({posts}) {
  console.log(posts) // Imported sucessfully
  return (
    <>
      <Head>
        <title>Jrbi - Psychologist</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <div class="relative overflow-x-hidden">
          <div class="absolute w-[380px] -top-24 right-20 min-h-screen bg-hero-pattern bg-contain bg-no-repeat bg-right-bottom opacity-10 overflow-hidden z-0" />
          <Hero />
          <About />
          <Interversions/>
          <Blog/>
          <Contact/>
        </div>
      </main>
    </>
  );
}

export async function getServerSideProps(context) {
  const client = createClient({
    projectId: "rpf7v2k6", //Project id is in the sanity.json
    dataset: "production",
    useCdn: false,
  });
  const posts = await client.fetch(`*[_type == "blog"]`); //The post.js in backend and fetching the content from the post.js in backend. You need to rememeber the syntax how to use author and its value like name. Make sure in the time of publishing you should define your author otherwise it will give you an error : Can't define the properties of undefine

  return {
    props: {
      posts, //Return the fetch variable
    },
  };
}